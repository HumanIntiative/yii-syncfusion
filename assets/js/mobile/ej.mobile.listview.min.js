/*!
*  filename: ej.mobile.listview.min.js
*  version : 13.1.0.21
*  Copyright Syncfusion Inc. 2001 - 2015. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n){typeof define=="function"&&define.amd?define(["./ej.mobile.core.min","./ej.mobile.application.min","./ej.mobile.button.min","./ej.mobile.checkbox.min","./ej.mobile.textbox.min","./ej.mobile.header.min","./ej.mobile.scrollpanel.min","./../common/ej.core.min","./../common/ej.data.min","./../common/ej.unobtrusive.min","./../common/ej.touch.min"],n):n()})(function(){(function($,ej,undefined){ej.widget("ejListViewBase","ej.ListViewBase",{defaults:{height:null,width:null,selectedItemIndex:-1,enableGroupList:!1,enableAjax:!1,enableCache:!1,enablePersistence:!1,load:null,loadComplete:null,ajaxBeforeLoad:null,ajaxSuccess:null,ajaxError:null,ajaxComplete:null,ajaxSettings:{type:"GET",cache:!1,async:!0,dataType:"html",contentType:"html",url:"",data:{}},renderTemplate:!1,templateId:null,persistSelection:!1,preventSelection:!1,dataSource:[],query:null,showHeader:!1,cssClass:"",headerTitle:"Title",headerBackButtonText:null,enableFiltering:!1,enableCheckMark:!1},observables:["selectedItemIndex","dataSource"],selectedItemIndex:ej.util.valueFunction("selectedItemIndex"),dataSource:ej.util.valueFunction("dataSource"),_updateModelItems:function(){var ang_attr,ul,ang_li,proxy,element,element1,primaryKey,parentPrimaryKey;if(this.model.items=eval(this.model.items),ang_attr=this.model.items,ang_attr.length){for(ul=ej.buildTag("ul.e-m-clearall"),i=0;i<ang_attr.length;i++)ang_attr[i].items=[],ang_li=ej.buildTag("li"),this.model.items[i].template&&ang_li.html(this.model.items[i].template),!this.model.items[i].childId&&this.model.items[i].href&&(this.model.items[i].childId="page_"+parseInt(Math.random().toFixed(3)*1e3)),ul.append(ang_li);this.element.append(ul)}else for(this._listitems=this.element.find(">ul >li"),proxy=this,index=0;index<this._listitems.length;index++)for(element=this._listitems[index],ej.getAttrVal(element,"data-ej-primarykey")==null&&$(element).find("ul").length?(primaryKey=Math.round(Math.random()*100),$(element).attr("data-ej-primarykey",primaryKey)):primaryKey="",proxy.model.items.push(proxy._itemsObjectCollection($(proxy._listitems[index]),primaryKey,null)),proxy.model.items[index].items=[],proxy._nestedListitems=$(proxy._listitems[index]).find("ul >li"),index1=0;index1<this._nestedListitems.length;index1++)element1=this._nestedListitems[index1],ej.getAttrVal(element1,"data-ej-primarykey")==null&&$(element1).find("ul").length?(primaryKey=Math.round(Math.random()*100),$(element1).attr("data-ej-primarykey",primaryKey)):primaryKey="",parentPrimaryKey=ej.getAttrVal($($(element1).parent()).closest("li"),"data-ej-primarykey"),proxy.model.items[index].items.push(proxy._itemsObjectCollection($(proxy._nestedListitems[index1]),primaryKey,parentPrimaryKey))},_load:function(){if(this._orgEle=this.element.clone(),this._index=0,this._items=[],this.model.id=this.element[0].id,this.model.load&&this._trigger("load"),this.model.fieldSettings=eval(this.model.fieldSettings),this.model.fieldSettings&&this.model.query!=null){var proxy=this;proxy._prefixClass=="e-m-"&&App.waitingPopUp.show();this.dataSource().executeQuery(eval(this.model.query)).done(function(n){proxy.model.dataSource=n.result;proxy._renderControl();proxy._prefixClass=="e-m-"&&App.waitingPopUp.hide()})}else this._renderControl()},_renderControl:function(){var hdr,innerDiv,length,title,i,groupdiv,ul,eLi,ulItems;if(this.element.addClass(this._prefixClass+"parentlv "),this._lbEle=ej.buildTag("div."+this._rootCSS),this._lbEle.addClass("subpage"),this._prefixClass=="e-m-"&&(this._lbEle.addClass("e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" "+this.model.cssClass).addClass(ej.isMobile()?"e-m-mobile":"e-m-tablet"),this.model.ios7.inline&&this._lbEle.addClass("e-m-inline")),this._lContainer=ej.buildTag("div."+this._prefixClass+"list-container#"+this.model.id+"_container"),ul=this.element.find(">ul"),this.model.showHeader&&(hdr=this._renderHeader(this.model.id,this.model.showHeaderBackButton,this.model.headerTitle,this.model.headerBackButtonText),this._lbEle.prepend(hdr)),this._prefixClass=="e-m-"&&this.model.allowScrolling&&this._renderScrollPanel(this._lbEle,this.model.id+"_scroll",this.model.id+"_container"),this._hasDataSource()&&!this.model.renderTemplate&&this.element.empty(),this.model.renderTemplate&&(this.model.templateId?this._tempContent.find("#"+this.model.templateId).length&&(this._template=this._tempContent.find("#"+this.model.templateId),ej.destroyWidgets(this._template),this._template[0].nodeName.toLowerCase()!="script"&&this._template.remove(),this._template=this._template[0].nodeName&&this._template[0].nodeName.toLowerCase()=="script"?ej.getClearString(this._template[0].innerHTML):this._template[0].outerHTML):(ej.destroyWidgets(this.element),this._template=this.element.html(),this.element.empty())),!this.model.renderTemplate||this._hasDataSource()||this.model.enableGroupList){if(!this.model.renderTemplate||this.model.renderTemplate&&this._hasDataSource()||this.model.renderTemplate&&this.model.enableGroupList){if(this._model_index=0,this.model.enableGroupList){if(this._lContainer.addClass(this._prefixClass+"grouped"),innerDiv=ej.buildTag("div."+this._prefixClass+"grouplist"),ul=this.element.children(),ul.length)for(length=this._hasDataSource()?this.dataSource().length:ul.length,i=0;i<length;i++)this._hasDataSource()?(this._items=this.dataSource()[i].items,this.model.renderTemplate?ulItem=ul[i]:(ulItem=ej.buildTag("ul"),this._lbEle.append(ulItem))):(this._items=[],ulItem=ul[i]),title=this._hasDataSource()?this.dataSource()[i].key:ej.getAttrVal($(ulItem),"data-ej-grouplisttitle","GroupList"+(i+1)),groupdiv=ej.buildTag("div."+this._prefixClass+"groupdiv",ej.buildTag("div."+this._prefixClass+"grouptitle",title)),innerDiv.append(groupdiv.append(this._renderListItems($(ulItem).addClass(this._prefixClass+"grouped"))));else this._template&&(ej.destroyWidgets(this._template),innerDiv[0].innerHTML=this._template);this._lContainer.append(innerDiv);ej.widget.init&&ej.widget.init(innerDiv)}else{if(this._hasDataSource())for(ul=ej.buildTag("ul"),this._items=this.dataSource(),this._items=eval(this._items),j=0;j<this._items.length;j++)this._items[j].href&&!this._items[j].childId&&(this._items[j].childId="page_"+parseInt(Math.random().toFixed(3)*1e3));ul.length?(ej.destroyWidgets(ul),this._lContainer.append(this._renderListItems(ul))):this._template&&(ej.destroyWidgets(this._template),this._lContainer[0].innerHTML=this._template)}this.element.prepend(this._lbEle);this.model.enableFiltering&&this._createFilterWrapper(this._lbEle);this._lbEle.append(this._lContainer);ej.widget.init&&ej.widget.init(this._lContainer);eLi=this.element.find("li."+this._prefixClass+"list");eLi.removeEleEmptyAttrs();eLi.find("."+this._prefixClass+"list-anchor").removeEleEmptyAttrs();ej.widget.init&&ej.widget.init(this._lbEle);ulItems=this.element.find("ul");ulItems.find("li:first").addClass(this._prefixClass+"firstitem");ulItems.find("li:last").addClass(this._prefixClass+"lastitem");this._liEl=this.element.find("li");this.selectedItemIndex()>=0&&!this.model.preventSelection&&this.model.persistSelection&&!ej.getBooleanVal(ulItems[this.selectedItemIndex()],"data-preventselection",this.model.preventSelection)&&ej.getBooleanVal(ulItems[this.selectedItemIndex()],"data-persistselection",this.model.persistSelection)&&(this._currentItem=$(this._liEl[this.selectedItemIndex()]),this._prevItem=this._currentItem,this._currentItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active"));$(this.element.find("."+this._prefixClass+"lv-check").parent()).addClass(this._prefixClass+"lv-checkdiv");$(this.element.find("."+this._prefixClass+"lv-check").closest("li."+this._prefixClass+"list")).addClass(this._prefixClass+"list-check");$(this.element.find("."+this._prefixClass+"lv-input").closest("."+this._prefixClass+"lv-filter")).addClass(this._prefixClass+"lv-inputdiv");this._wireEvents()}}else this.element.append(this._lbEle.append(this._lContainer)),this._template&&(this._lContainer.append(this._template),ej.widget.init&&ej.widget.init(this._lContainer));this._setHeightWidth();this.model.loadComplete&&this._trigger("loadComplete")},_createFilterWrapper:function(n){var t=this._createFilterDiv(),i=ej.buildTag("a."+this._prefixClass+"lv-anchor",ej.buildTag("span."+this._prefixClass+"input-btn"),{},{Title:"Clear text","data-role":"none"});$(t).append(i);n.append(t)},_renderListItems:function(ul){var proxy=this,element,model_index,dataMgr2,grouped,dataMgr1,parentItem,ulItems,j;if(ul.addClass(this._prefixClass+"list-hdr "+this._prefixClass+"clearall"),this._liItems=ul.find(">li"),this._liItems.length&&!this._hasDataSource()||this._hasDataSource()){if(this._renderParentChildTemplate(),this._hasDataSource())this._items=eval(this._items),dataMgr1=ej.DataManager(this._items),grouped=dataMgr1.executeLocal(ej.Query().from(proxy._items).where(ej.Predicate(proxy.model.fieldSettings.parentPrimaryKey,ej.FilterOperators.notEqual,null)).group(proxy.model.fieldSettings.parentPrimaryKey)),proxy._childRendering(grouped);else{for(item_index=0;item_index<this._liItems.length;item_index++)element=this._liItems[item_index],model_index=item_index+this._model_index,proxy._generateData(element,null,proxy.model.items[model_index].primaryKey,model_index),this._items[item_index].items=="undefined"||(dataMgr2=ej.DataManager(proxy._items[item_index].items),grouped=dataMgr2.executeLocal(ej.Query().from(proxy._items).where(ej.Predicate(proxy.model.fieldSettings.parentPrimaryKey,ej.FilterOperators.notEqual,null)).group(proxy.model.fieldSettings.parentPrimaryKey)),proxy._childRendering(grouped));this._model_index=this._model_index+item_index}if(dataMgr1=ej.DataManager(this._items),parentItem=dataMgr1.executeLocal(ej.Query().from(this._items).where(ej.Predicate(this.model.fieldSettings.parentPrimaryKey,ej.FilterOperators.equal,null))),parentItem)for(ul.empty().html($(this.jsRender).render(parentItem)),ulItems=ul.find(">li"),j=0;j<ulItems.length;j++)parentItem[j]&&parentItem[j].attributes&&$(ulItems[j]).addEleAttrs(parentItem[j].attributes)}return this._initEJCheckBox&&this._initEJCheckBox(ul),ul},_childRendering:function(n){var t=this;n.length&&(t.element.append($(t.jsChildRender).render(n)),$.each(n,function(i,r){var e,f,u;for(ej.widget.init&&ej.widget.init(t.element.find("#child"+r.key)),e=t.element.find("#child"+r.key).find("ul"),f=e.find("li"),k=0,u=0;u<f.length;u++)n[k].items[u]&&n[k].items[u].attributes&&$(f[u]).addEleAttrs(n[k].items[u].attributes);k++}))},_renderParentChildTemplate:function(){var t=this._renderLists(),i,n,r;$.views.helpers({_checkAjaxUrls:this._checkAjaxUrl,_checkImgUrls:this._checkImgUrl,_checkIsChecked:this._checkIsCheck,Object:this,ej:ej});this.jsRender=ej.buildTag("script#"+this.model.id+"_Template","",{},{type:"text/x-jsrender"});this.jsRender[0].text=ej.browserInfo().name=="msie"&&ej.browserInfo().version<10?t[0].outerHTML.replace(/&gt;/g,">"):t[0].outerHTML.replace(/&gt;/g,">");this.jsChildRender=ej.buildTag("script#"+this.model.id+"_ChildTemplate","",{},{type:"text/x-jsrender"});i=ej.buildTag("ul."+this._prefixClass+"childcontainer "+this._prefixClass+"list-hdr "+this._prefixClass+"clearall");t.addClass(this._prefixClass+"childli");i[0].innerHTML="{{for items}}"+t[0].outerHTML+"{{/for}}";n=ej.buildTag("div."+this._rootCSS+" subpage "+this._prefixClass+"childitem","",{},{id:"{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}",style:"display:none"});this._prefixClass=="e-m-"&&n.addClass(this._prefixClass+this.model.renderMode+this._prefixClass+this.model.theme+!ej.isMobile()?" e-m-tablet":" e-m-mobile");r=ej.buildTag("div."+this._prefixClass+"list-container","",{},{id:"{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}_container"});this.model.showHeader&&n.append(this._renderHeader("{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}",!0,"Title"));this.model.enableFiltering&&this._createFilterWrapper(n);n.append(r.append(i));this._prefixClass=="e-m-"&&this.model.allowScrolling&&this._renderScrollPanel(n,"{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}_scroll","{{if key}}child{{>key}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}_container");ej.browserInfo().name=="msie"&&ej.browserInfo().version<10?this.jsChildRender[0].text=n[0].outerHTML.replace(/&gt;/g,">"):this.jsChildRender[0].innerHTML=n[0].outerHTML.replace(/&gt;/g,">")},_renderChild:function(n){this._currentItem.attr("data-childid",n);this._currentItem.attr("data-childtitle")||this._currentItem.attr("data-childtitle",this._currentItem.text());this._createListDiv(n);this._div.hide();this._prefixClass=="e-m-"&&this._div.addClass(ej.isMobile()?this._prefixClass+"m-mobile":this._prefixClass+"m-tablet");this._container=ej.buildTag("div."+this._prefixClass+"list-container#"+n+"_container");this.element.append(this._div);this.model.allowScrolling&&this._renderScrollPanel(this._div,n+"_scroll",n+"_container",!0)},_checkImgUrl:function(){var n=this.getRsc("helpers","Object"),t=this.data[n.model.fieldSettings.imageUrl];return $.support.pushstate||(t=typeof App=="object"?App.route.makeUrlAbsolute(t,!0):t),"<img src = "+t+" class='"+n._prefixClass+"list-img "+n._prefixClass+"rel "+n._prefixClass+"user-select'/>"},_checkAjaxUrl:function(){var i=this.data.href,r=this.data.childId,e=this.data.renderTemplate,o=this.data.templateId,n=this.getRsc("helpers","Object"),u=this.getRsc("helpers","ej"),f=n._currentPage(n),t;i&&i.indexOf("#")!=-1&&i!="#"?n._storedContent[r]||(t=f.find(i).remove(),n._storedContent[r]=t[0].nodeName&&t[0].nodeName.toLowerCase()=="script"?u.getClearString(t[0].innerHTML):t[0].outerHTML):n._storedContent[this.index]&&(n._storedContent=u._pushValue(n._storedContent,"",this.index))},_currentPage:function(n){return n._prefixClass=="e-m-"?ej.getCurrentPage():$("body")},_checkIsCheck:function(){return this.data[this.getRsc("helpers","Object").model.fieldSettings.checked]?!0:!1},_generateData:function(n,t,i,r){var u=this.model.items[r].text?this.model.items[r].text:$(n).text(),f=this.model.items[r].childHeaderTitle,e=$(n),o=this.model.items[r].childHeaderBackButtonText,s=this.model.items[r].renderTemplate?this.model.items[r].renderTemplate:!1,h=this.model.items[r].templateId;this._items.push({navigateUrl:this.model.items[r].navigateUrl?this.model.items[r].navigateUrl:"",href:this.model.items[r].href?this.model.items[r].href:"",enableAjax:this.model.items[r].enableAjax?this.model.items[r].enableAjax:this.model.enableAjax,preventSelection:(this.model.items[r].preventSelection=="true"||"false")?this.model.preventSelection:this.model.items[r].preventSelection,persistSelection:(this.model.items[r].persistSelection=="true"||"false")?this.model.persistSelection:this.model.items[r].persistSelection,text:u,enableCheckMark:this.model.enableCheckMark,checked:this.model.items[r].checked?this.model.items[r].checked:!1,primaryKey:this.model.items[r].primaryKey?this.model.items[r].primaryKey:i,parentPrimaryKey:t?t:null,imageClass:this.model.items[r].imageClass?this.model.items[r].imageClass:"",imageUrl:this.model.items[r].imageUrl?this.model.items[r].imageUrl:"",childHeaderTitle:f,childId:this.model.items[r].childId,childHeaderBackButtonText:o,renderTemplate:s,templateId:h,touchStart:this.model.items[r].touchStart?this.model.items[r].touchStart:this.model.touchStart,touchEnd:this.model.items[r].touchEnd?this.model.items[r].touchEnd:this.model.touchEnd,mouseUp:this.model.items[r].mouseUp?this.model.items[r].mouseUp:this.model.mouseUp,mouseDown:this.model.items[r].mouseDown?this.model.items[r].mouseDown:this.model.mouseDown,attributes:e.removeEleAttrs(/^data-ej-/)[0].attributes,items:this.model.items[r].items})},_onTouchStartHandler:function(n){ej.isDevice()||ej._preventDefaultException(n.target,this._preventDefaultException)||n.preventDefault&&n.preventDefault();ej.isWindows&&ej.isWindows()&&ej._touchStartPoints(n,this);this._currentItem=$(n.currentTarget);this._scroll=!1;ej.getBooleanVal(this._currentItem,"data-preventSelection",this.model.preventSelection)||this._addSelection();this.model.renderMode!="windows"||this.model.windows.preventSkew||this._currentItem.addClass(ej.isMobile()?ej._getSkewClass($(this._currentItem),n.pageX,n.pageY):this._prefixClass+"m-skew-center");this._triggerStartEvent(this._returnData());ej.listenEvents([this._liEl,this._liEl],[ej.endEvent(),ej.moveEvent(),ej.cancelEvent()],[this._touchEndDelegate,this._touchMoveDelegate,this._touchMoveDelegate],!1,this);$(window).bind(ej.endEvent(),this._docClickDelegate)},_onTouchMoveHandler:function(n){(!ej.isWindows||ej.isWindows&&!ej.isWindows()||ej.isWindows&&ej.isWindows()&&ej._isTouchMoved(n,this))&&(this._scroll=!0,ej.getBooleanVal(this._currentItem,"data-persistSelection",this.model.persistSelection)?this._prevItem&&this._prevItem[0]!=this._currentItem[0]&&this._removeSelection():this._removeSelection(),this.model.renderMode!="windows"||this.model.windows.preventSkew?this.model.renderMode!="windows"&&!ej.getBooleanVal(this._currentItem,"data-preventselection",this.model.preventSelection)&&this._prevItem&&ej.getBooleanVal(this._currentItem,"data-persistSelection",this.model.persistSelection)&&this._prevItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active"):ej._removeSkewClass(this._currentItem))},_onTouchEndHandler:function(n){var u,r,t,i,f,e;if(this._isFromAjax=!1,ej.getBooleanVal(this._currentItem,"data-persistSelection",this.model.persistSelection)||this._removeSelection(),this.model.renderMode!="windows"||this.model.windows.preventSkew||ej._removeSkewClass(this._currentItem),this._scroll)return this._setCurrent(),this._unbindEvents(n),!1;if(this._scroll)this.model.renderMode!="windows"||ej.isMobile()||this._touchEndEventHandler();else{if(this._currentItem.find("."+this._prefixClass+"lv-check").length&&(u=this._currentItem.find("."+this._prefixClass+"lv-check"),this._prefixClass!="e-m-"&&(this._prefixClass!="e-"||$(n.target).closest(".e-lv-checkdiv").length)||this._toggleCheckboxValue(u)),r=this._prefixClass=="e-m-"?this._currentItem.attr("data-childheaderbackbuttontext")==undefined?this._currentItem.closest("."+this._rootCSS+"").find("."+this._prefixClass+"header").length?this._currentItem.closest("."+this._rootCSS+"").find("."+this._prefixClass+"header").ejmHeader("getTitle"):"Back":ej.getAttrVal(this._currentItem,"data-childheaderbackbuttontext"):this._currentItem.attr("data-childheaderbackbuttontext")==undefined?this._currentItem.closest("."+this._rootCSS+"").find("."+this._prefixClass+"header").length?this._currentItem.closest("."+this._rootCSS+"").find("."+this._prefixClass+"header ."+this._prefixClass+"htitle").text():"Back":ej.getAttrVal(this._currentItem,"data-childheaderbackbuttontext"),t=this._currentItem.attr("data-href"),this._currentItem.attr("data-navigateUrl"))this._touchEndEventHandler();else{if(i=this._isInsideNavigation?this._tempContent.find("[data-ajaxurl='"+this._convertToRelativeUrl(t)+"']"):this.element.find("[data-ajaxurl='"+this._convertToRelativeUrl(t)+"']"),ej.getBooleanVal(this._currentItem,"data-loadajax",this.model.enableAjax)&&(!this.model.enableCache||i.length==0)){i.length&&i.remove();this.loadAjaxContent(t,r);this._unbindEvents(n);this._isInsideNavigation&&this._nearestND.model.contentId&&this._closeNavigation();return}t&&t.indexOf("#")!=-1&&(this._currentPage(this).find("#"+t.replace("#","")).length||(this._renderChild(ej.getAttrVal(this._currentItem,"data-childid","page_"+parseInt(Math.random().toFixed(3)*1e3))),f=ej.buildTag("div."+this._prefixClass+"content",this._storedContent[this._currentItem.attr("data-childid")]),this._div.append(this._container.append(f)),ej.widget.init&&ej.widget.init(this._div)));this._updateContent(this._currentItem,r);this._isInsideNavigation&&(e=this._nearestND.model.contentId?!this._currentItem.attr("data-childid")||this._currentItem.attr("data-href"):!(this._currentItem.attr("data-childid")||this._currentItem.attr("data-href")));this._isInsideNavigation&&e&&this._closeNavigation();this._touchEndEventHandler()}this._prevItem=this._currentItem}this._unbindEvents(n)},_closeNavigation:function(){this._prefixClass=="e-m-"?this.element.closest("."+this._prefixClass+"nb").ejmNavigationDrawer("close"):this.element.closest("."+this._prefixClass+"nb").ejNavigationDrawer("close")},_setCurrent:function(){this._prevItem&&ej.getBooleanVal(this._currentItem,"data-persistSelection",this.model.persistSelection)&&(this._currentItem=this._prevItem,this._currentItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active"))},_unbindEvents:function(n){n&&n.target.nodeName&&n.target.nodeName.toLowerCase()!="a"&&(this._scroll=!1);ej.listenEvents([this._liEl,this._liEl],[ej.endEvent(),ej.moveEvent(),ej.cancelEvent()],[this._touchEndDelegate,this._touchMoveDelegate,this._touchMoveDelegate],!0,this)},_addSelection:function(){this._scroll||(this._currentItem.closest("."+this._prefixClass+"list-container").find("."+this._prefixClass+"state-active").removeClass(this._prefixClass+"state-active").addClass(this._prefixClass+"state-default"),this._currentItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active"))},_removeSelection:function(){var n=this;n._currentItem.removeClass(this._prefixClass+"state-active").addClass(this._prefixClass+"state-default")},_setHeightWidth:function(){if(this.model.autoAdjustHeight)this.element.height(window.innerHeight);else if(this.model.height)this.element.height(this.model.height);else{var n=this.element[0].scrollHeight?this.element[0].scrollHeight:ej.getDimension(this._lbEle.find("."+this._prefixClass+"list-container"),"outerHeight");this.model.showHeader&&(n=n+ej.getDimension(this._lbEle.find("."+this._prefixClass+"header"),"outerHeight"));this.model.enableFiltering&&(n=n+ej.getDimension(this._lbEle.find("."+this._prefixClass+"lv-inputdiv"),"outerHeight"));this.element.height(n)}this.model.width&&this.element.width(this.model.width)},_touchEndEventHandler:function(){this._triggerEndEvent(this._returnData())},_docClick:function(){this._scroll&&this._setCurrent();$(window).unbind(ej.endEvent(),this._docClickDelegate);ej.listenEvents([this._liEl,this._liEl],[ej.endEvent(),ej.moveEvent()],[this._touchEndDelegate,this._touchMoveDelegate],!0,this)},_popStateNavigation:function(n,t){t.pageUrl&&this.model.enableFiltering&&this._initializeFiltering($("div[data-url='"+t.pageUrl.replace("#","")+"']"))},_anchorClickHandler:function(n){if(this._scroll)return ej.blockDefaultActions(n),!1},_onResize:function(){var n=this;setTimeout(function(){n._setHeightWidth()},ej.isAndroid()?200:0)},_onScrollStop:function(n){ej.blockDefaultActions(n)},_createDelegates:function(){this._anchorClickDelegate=$.proxy(this._anchorClickHandler,this);this._keyup=$.proxy(this._onKeyUp,this);this._touchStartDelegate=$.proxy(this._onTouchStartHandler,this);this._touchEndDelegate=$.proxy(this._onTouchEndHandler,this);this._touchMoveDelegate=$.proxy(this._onTouchMoveHandler,this);this._resizeDelegate=$.proxy(this._onResize,this);this._popStateDelegate=$.proxy(this._popStateNavigation,this);this._docClickDelegate=$.proxy(this._docClick,this)},_wireEvents:function(n){var t,i;if(this._liEl){this._createDelegates();t=n?"unbind":"bind";this.model.autoAdjustHeight&&(i=!ej.isDevice()&&"onorientationchange"in window?"orientationchange":"resize",ej.listenEvents([window],[i],[this._resizeDelegate],n,this));ej.listenEvents([this._liEl.find("a"),this.element.find("."+this._prefixClass+"lv-input"),this._liEl,this._liEl],["click","keyup",ej.startEvent(),ej.cancelEvent()],[this._anchorClickDelegate,this._keyup,this._touchStartDelegate,this._touchMoveDelegate],n,this);this._lContainer.on("scrollstop",$.proxy(this._onScrollStop,this));$("body")[t]("viewpopstate",this._popStateDelegate);this.model.enableFiltering&&this._initializeFiltering(this._lbEle)}},_initializeFiltering:function(n){var i,t;for(this._searchItems=$(n).find("."+this._prefixClass+"list"),this._emptyFilterTextValue(n),n.find("."+this._prefixClass+'list[style*="display: none"]').show(),i="a",this._elementText=[],t=0;t<this._searchItems.length;t++)$(this._searchItems[t]).find(i)?this._elementText.push($.trim($(this._searchItems[t]).find(i).html().replace(new RegExp("<[^<]+>","g"),"").toLowerCase())):this._elementText.push("")},_onKeyUp:function(n){for(var t=0;t<this._searchItems.length;t++)this._elementText[t].indexOf(n.target.value)==-1?$(this._searchItems[t]).css("display","none"):$(this._searchItems[t]).css("display","")},_setModel:function(n){var r=!1,t,i;for(t in n)i="_set"+t.charAt(0).toUpperCase()+t.slice(1),this[i]?this[i](n[t]):r=!0;r&&this._refresh()},_setTheme:function(n){if(n&&(this.model.theme=n,this._lbEle.removeClass("e-m-dark e-m-light e-default").addClass("e-m-"+this.model.theme),this.model.enableFiltering&&this.element.find("."+this._prefixClass+"text-input").ejmTextBox("model.theme",this.model.theme),this.model.showHeader&&this._lbEle.find("#"+this.model.id+"_header").ejmHeader("model.theme",this.model.theme),this.element.find("."+this._prefixClass+"childitem").length)){$(this.element.find("."+this._prefixClass+"childitem")).removeClass("e-m-dark e-m-light e-default").addClass("e-m-"+this.model.theme);var t=this.element.find("."+this._prefixClass+"childitem ."+this._prefixClass+"header"),i=this;t.each(function(n,t){$(t).ejmHeader("model.theme",i.model.theme)})}},_setDataSource:function(n,t){this._hasDataSource()&&n&&(t&&(this.model.fieldSettings=t),this._refresh())},_hasDataSource:function(){return this.dataSource()&&this.dataSource().length},_getElement:function(n){return n?this.element.find("#"+n):this._lbEle},_isEnable:function(n){return n.hasClass(this._prefixClass+"state-disabled")?!1:!0},_refresh:function(){this._destroy();this.element.addClass(this._rootCSS);this._load()},_clearElement:function(){this.element.removeAttr("class").removeAttr("style");this.element.empty().html(this._orgEle.html())},_destroy:function(){this._wireEvents(!0);this._clearElement()},loadAjaxContent:function(n,t){var i=this,r,u;this._isFromAjax=!0;this._renderChild(ej.getAttrVal(this._currentItem,"data-childid","page_"+parseInt(Math.random().toFixed(3)*1e3)));(!$.support.pushstate||ej.isWindowsWebView())&&i._prefixClass=="e-m-"&&(n=App.route.makeUrlAbsolute(n));r={content:i._div,item:i._currentItem,index:$(i._currentItem).index(),text:$(i._currentItem).text(),url:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n};this.model.ajaxBeforeLoad&&this._trigger("ajaxBeforeLoad",r);u={cache:i.model.ajaxSettings.cache,async:i.model.ajaxSettings.async,type:i.model.ajaxSettings.type,contentType:i.model.ajaxSettings.contentType,url:ej.isWindowsWebView()?n:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n,dataType:i.model.ajaxSettings.dataType,data:i.model.ajaxSettings.data,successHandler:function(r){var f=ej.buildTag("div."+this._prefixClass+"content",/<\/?body[^>]*>/gmi.test(r)?r.split(/<\/?body[^>]*>/gmi)[1]:r||""),u;i._div.append(i._container.append(f));i._prefixClass=="e-m-"&&i._div.attr("data-ajaxurl",App.route.convertToRelativeUrl(n));i._updateContent(i._currentItem,t);u={content:i._div,item:i._currentItem,index:$(i._currentItem).index(),text:$(i._currentItem).text(),url:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n};i.model.ajaxSuccess&&i._trigger("ajaxSuccess",u)},errorHandler:function(t,r,u){var f={xhr:t,textStatus:r,errorThrown:u,item:i._currentItem,index:$(i._currentItem).index(),text:$(i._currentItem).text(),url:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n};i.model.ajaxError&&i._trigger("ajaxError",f)},completeHandler:function(){var t={content:i._div,item:i._currentItem,index:$(i._currentItem).index(),text:$(i._currentItem).text(),url:i.model.ajaxSettings.url?i.model.ajaxSettings.url:n};i.model.ajaxComplete&&i._trigger("ajaxComplete",t)}};ej.sendAjaxRequest(u)},selectItem:function(n,t){n>=0&&this._isEnable($(this._getElement(t).find("li."+this._prefixClass+"list")[n]))&&(this.setActive(n,t),this._currentItem=$(this._getElement(t).find("li."+this._prefixClass+"list")[n]),this._prevItem=this._currentItem,this._onTouchEndHandler())},setActive:function(n,t){n>=0&&(element=this._getElement(t),this._isEnable($(element.find("li."+this._prefixClass+"list")[n]))&&ej.getBooleanVal($(element.find("li."+this._prefixClass+"list")[n]),"data-persistSelection",this.model.persistSelection)&&(element.find("li."+this._prefixClass+"list."+this._prefixClass+"state-active").removeClass(this._prefixClass+"state-active").addClass(this._prefixClass+"state-default"),this._currentItem=$(element.find("li."+this._prefixClass+"list")[n]),this._prevItem=this._currentItem,this._currentItem.removeClass(this._prefixClass+"state-default").addClass(this._prefixClass+"state-active")))},deActive:function(n,t){n>=0&&this._isEnable($(this._getElement(t).find("li."+this._prefixClass+"list")[n]))&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).removeClass(this._prefixClass+"state-active").addClass(this._prefixClass+"state-default")},enableItem:function(n,t){n>=0&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).removeClass(this._prefixClass+"state-disabled")},disableItem:function(n,t){n>=0&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).addClass(this._prefixClass+"state-disabled")},removeCheckMark:function(n,t){element=this._getElement(t);n>=0&&this._isEnable($(element.find("li."+this._prefixClass+"list")[n]))?$(element.find("li."+this._prefixClass+"list")[n]).find("."+this._prefixClass+"lv-checkdiv").remove():element.find("."+this._prefixClass+"lv-checkdiv").remove()},checkItem:function(n,t){n>=0&&this._isEnable($(this._getElement(t).find("li."+this._prefixClass+"list")[n]))&&this._setCheckboxValue($(this._getElement(t).find("."+this._prefixClass+"lv-check")[n]),!0)},unCheckItem:function(n,t){n>=0&&this._isEnable($(this._getElement(t).find("li."+this._prefixClass+"list")[n]))&&this._setCheckboxValue($(this._getElement(t).find("."+this._prefixClass+"lv-check")[n]),!1)},checkAllItem:function(n){var t=this;this._getElement(n).find("."+this._prefixClass+"lv-check").each(function(i,r){t._isEnable($(t._getElement(n).find("li."+t._prefixClass+"list")[i]))&&t._setCheckboxValue($(r),!0)})},unCheckAllItem:function(n){var t=this;this._getElement(n).find("."+this._prefixClass+"lv-check").each(function(i,r){t._isEnable($(t._getElement(n).find("li."+t._prefixClass+"list")[i]))&&t._setCheckboxValue($(r),!1)})},getActiveItem:function(n){return this._getElement(n).find("li."+this._prefixClass+"list."+this._prefixClass+"state-active")},getActiveItemText:function(n){return this._getElement(n).find("li."+this._prefixClass+"list."+this._prefixClass+"state-active").text()},getItemText:function(n,t){if(n>=0)return $(this._getElement(t).find("li."+this._prefixClass+"list")[n]).text()},getCheckedItems:function(n){return this._getElement(n).find("input."+this._prefixClass+"lv-check:checked").closest("li."+this._prefixClass+"list")},getCheckedItemsText:function(n){return $(this.getCheckedItems(n)).map(function(){return $(this).text()}).get()},hasChild:function(n,t){if(n>=0)return this.element.find("#"+$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).attr("data-childid")).length?!0:!1},isChecked:function(n,t){if(n>=0)return $(this._getElement(t).find("li."+this._prefixClass+"list")[n]).find("input."+this._prefixClass+"lv-check").prop("checked")},showItem:function(n,t){n>=0&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).css("visibility","")},hideItem:function(n,t){n>=0&&$(this._getElement(t).find("li."+this._prefixClass+"list")[n]).css("visibility","hidden")},show:function(n){this._getElement(n).css("visibility","")},hide:function(n){this._getElement(n).css("visibility","hidden")},addItem:function(n,t){t>=0?(this.model.items.splice(t,0,this._itemsObjectCollection(n,"","")),n.insertBefore($(this._orgEle.children().children()[t]))):this._orgEle.children().append(n);this._refresh()},removeItem:function(n,t){if(n>=0){element=this._getElement(t);var i=$(element.find("li."+this._prefixClass+"list")[n]).attr("data-childid");this.element.find($("#"+i).length)&&this.element.find($("#"+i)).remove();$(element.find("li."+this._prefixClass+"list")[n]).remove()}},clear:function(){this.element.empty().html();this._liEl=this.element.find("li."+this._prefixClass+"list")},getItemsCount:function(n){return this._getElement(n).find("li."+this._prefixClass+"list").length}})})(jQuery,Syncfusion),function(n,t,i){t.widget("ejmListView","ej.mobile.ListView",{_setFirst:!0,_rootCSS:"e-m-lv",_prefixClass:"e-m-",defaults:{showScrollbars:!0,showHeaderBackButton:!1,autoAdjustScrollHeight:!0,autoAdjustHeight:!1,headerBackButtonTap:null,adjustFixedPosition:!0,enableNativeScrolling:t.isAndroid()||t.isIOS()?!1:t.isDevice()?!0:!1,hideHeaderForUnsupportedDevice:!1,fieldSettings:{navigateUrl:"navigateUrl",href:"href",enableAjax:"enableAjax",preventSelection:"preventSelection",persistSelection:"persistSelection",text:"text",enableCheckMark:"enableCheckMark",checked:"checked",primaryKey:"primaryKey",parentPrimaryKey:"parentPrimaryKey",imageClass:"imageClass",imageUrl:"imageUrl",childHeaderTitle:"childHeaderTitle",childId:"childId",childHeaderBackButtonText:"childHeaderBackButtonText",renderTemplate:"renderTemplate",templateId:"templateId",touchStart:"touchStart",touchEnd:"touchEnd",attributes:"attributes"},ios7:{inline:!1},windows:{preventSkew:!1,renderDefault:!1,enableHeaderCustomText:!1},allowScrolling:!0,renderMode:"auto",theme:"auto",touchStart:null,touchEnd:null,transition:t.isAndroid()?"pop":t.isWindows()&&t.isMobile()?"turn":t.isWindows()&&!t.isMobile()?"none":"slide",checkDOMChanges:!1,items:[]},dataTypes:{dataSource:"data",fieldSettings:"data",renderMode:"enum",theme:"enum",enablePersistence:"boolean"},observables:["selectedItemIndex","dataSource"],selectedItemIndex:t.util.valueFunction("selectedItemIndex"),dataSource:t.util.valueFunction("dataSource"),_tags:[{tag:"items",attr:["navigateUrl","href","text","checked","primaryKey","parentPrimaryKey","imageClass","imageUrl","childHeaderTitle","childId","childHeaderBackButtonText","touchStart","touchEnd","attributes","renderTemplate","templateId","enableAjax","preventSelection","persistSelection","enableCheckMark","attributes",],content:"template"}],_init:function(){this._preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/};this._tempContent=t.getCurrentPage();this._storedContent=[];this._storedTemplate=[];t.setRenderMode(this);t.setTheme(this);this.model.renderMode=="windows"&&t.isMobile()&&this.model.windows.renderDefault&&(this.model.theme="default");this._touchStart=this.model.touchStart;this._touchEnd=this.model.touchEnd;this._oldEle=this.element.clone();this._oldEle.find("ul").length&&(this.model.items=[]);this._indexVal=0;this._updateModelItems();this._load();this._nearestND=this.element.closest(".e-m-nb").ejmNavigationDrawer("instance");this._isInsideNavigation=this.element.closest(".e-m-nb.e-js").length},_itemsObjectCollection:function(i,r,u){var e,f;return t.getAttrVal(i,"data-ej-rendertemplate")&&(this._tempContent.find("#"+t.getAttrVal(i,"data-ej-templateid")).length?(e=this._tempContent.find("#"+t.getAttrVal(i,"data-ej-templateid")).remove(),this._storedTemplate[this._indexVal]=e[0].nodeName&&e[0].nodeName.toLowerCase()=="script"?t.getClearString(e[0].innerHTML):e[0].outerHTML):this._storedTemplate[this._indexVal]||(n(i)[0].innerHTML?this._storedTemplate[this._indexVal]=n(i)[0].innerHTML:this._storedTemplate[this._indexVal]&&this._tempContent.find("#"+template).length&&(e=this._tempContent.find("#"+template).remove(),e=e[0].nodeName&&e[0].nodeName.toLowerCase()=="script"?t.getClearString(e[0].innerHTML):e[0].outerHTML,this._storedTemplate=t._pushValue(this._storedTemplate,e,this._indexVal))),this._indexVal++),f={},f.text=t.getAttrVal(i,"data-ej-text"),f.navigateUrl=t.getAttrVal(i,"data-ej-navigateurl"),f.href=t.getAttrVal(i,"data-ej-href"),f.checked=t.getAttrVal(i,"data-ej-checked"),f.primaryKey=t.getAttrVal(i,"data-ej-primarykey",r),f.parentPrimaryKey=t.getAttrVal(i,"data-ej-parentprimarykey",u),n(i).attr("data-ej-parentprimarykey",u),f.imageClass=t.getAttrVal(i,"data-ej-imageclass"),f.imageUrl=t.getAttrVal(i,"data-ej-imageurl"),f.childHeaderTitle=t.getAttrVal(i,"data-ej-childheadertitle"),f.childId=f.href?t.getAttrVal(i,"data-ej-childid")?t.getAttrVal(i,"data-ej-childid"):"page_"+parseInt(Math.random().toFixed(3)*1e3):"",f.childHeaderBackButtonText=t.getAttrVal(i,"data-ej-childheaderbackbuttontext"),f.touchStart=t.getAttrVal(i,"data-ej-touchstart"),f.touchEnd=t.getAttrVal(i,"data-ej-touchend"),f.attributes=t.getAttrVal(i,"data-ej-attributes"),f.renderTemplate=t.getAttrVal(i,"data-ej-rendertemplate"),f.templateId=this._storedTemplate[this._indexVal-1],f.enableAjax=t.getAttrVal(i,"data-ej-enableajax"),f.enableCheckMark=t.getAttrVal(i,"data-ej-enablecheckmark"),f},_renderLists:function(){var n=t.buildTag("li","",{},{"class":this._prefixClass+"user-select "+this._prefixClass+"list "+this._prefixClass+"state-default{{if "+this.model.fieldSettings.primaryKey+" || "+this.model.fieldSettings.enableAjax+" || "+this.model.enableAjax+"}} "+this._prefixClass+"arrow{{/if}}{{if "+this.model.fieldSettings.imageClass+"}} "+this._prefixClass+"margin{{else}}{{if "+this.model.fieldSettings.imageUrl+"}} "+this._prefixClass+"margin{{/if}}{{/if}}","data-childid":"{{if "+this.model.fieldSettings.primaryKey+"}}child{{>"+this.model.fieldSettings.primaryKey+"}}{{else "+this.model.fieldSettings.childId+"}}{{>"+this.model.fieldSettings.childId+"}}{{else}}{{/if}}","data-childheadertitle":"{{>"+this.model.fieldSettings.childHeaderTitle+"}}","data-childheaderbackbuttontext":"{{>"+this.model.fieldSettings.childHeaderBackButtonText+"}}","data-preventSelection":"{{>"+this.model.fieldSettings.preventSelection+"}}","data-persistSelection":"{{>"+this.model.fieldSettings.persistSelection+"}}","data-navigateUrl":"{{>"+this.model.fieldSettings.navigateUrl+"}}","data-loadajax":"{{>"+this.model.fieldSettings.enableAjax+"}}","data-href":"{{>"+this.model.fieldSettings.href+"}}{{:~_checkAjaxUrls()}}","data-checked":"{{>"+this.model.fieldSettings.checked+"}}","data-templateid":"{{>"+this.model.fieldSettings.renderTemplate+"}}","data-touchstart":"{{>"+this.model.fieldSettings.touchStart+"}}","data-touchend":"{{>"+this.model.fieldSettings.touchEnd+"}}"}),r;if(this.model.renderTemplate)this._hasDataSource()&&this._template&&(n[0].innerHTML=this._template);else{var u=t.buildTag("a","",{},{"class":this._prefixClass+"list-anchor "+this._prefixClass+"remove-shadow{{if "+this.model.fieldSettings.imageClass+"}} "+this._prefixClass+"margin{{else}}{{if "+this.model.fieldSettings.imageUrl+"}} "+this._prefixClass+"margin{{/if}}{{/if}}{{if "+this.model.fieldSettings.primaryKey+" || "+this.model.fieldSettings.enableAjax+" || "+this.model.enableAjax+"}} "+this._prefixClass+"fontimage{{/if}}",href:t.browserInfo().name=="msie"&&t.browserInfo().version<9?"":"{{if "+this.model.fieldSettings.navigateUrl+" == '' || "+this.model.fieldSettings.navigateUrl+" == undefined }}{{else}}{{:"+this.model.fieldSettings.navigateUrl+"}}{{/if}}"}),f=t.buildTag("span","{{>"+this.model.fieldSettings.text+"}}",{},{"class":this._prefixClass+"list-text "+this._prefixClass+"rel "+this._prefixClass+"user-select{{if "+this.model.fieldSettings.imageClass+"}} "+this._prefixClass+"text{{else}}{{if "+this.model.fieldSettings.imageUrl+"}} "+this._prefixClass+"text{{/if}}{{/if}}"}),e=t.buildTag("div","",{},{"class":this._prefixClass+"list-img "+this._prefixClass+"rel "+this._prefixClass+"user-select {{>"+this.model.fieldSettings.imageClass+"}}"}),i=this._createCheckBox();u[0].innerHTML=this.model.renderMode=="windows"&&t.isMobile()?"{{if !"+this.model.fieldSettings.primaryKey+"}}{{if "+this.model.fieldSettings.enableAjax+" == undefined || "+this.model.fieldSettings.enableAjax+".toString() == 'false'}}{{if !"+this.model.fieldSettings.navigateUrl+"}}{{if "+this.model.fieldSettings.enableCheckMark+" !== undefined}}{{if "+this.model.fieldSettings.enableCheckMark+".toString() == 'false' ? "+this.model.fieldSettings.enableCheckMark+" : "+this.model.enableCheckMark+"}}"+i[0].outerHTML+"{{/if}}{{else}}{{if "+this.model.enableCheckMark+"}}"+i[0].outerHTML+"{{/if}}{{/if}}{{/if}}{{/if}}{{/if}}{{if "+this.model.fieldSettings.imageClass+"}}"+e[0].outerHTML+"{{else}}{{if "+this.model.fieldSettings.imageUrl+"}}{{:~_checkImgUrls()}}{{/if}}{{/if}}"+f[0].outerHTML:"{{if "+this.model.fieldSettings.imageClass+"}}"+e[0].outerHTML+"{{else}}{{if "+this.model.fieldSettings.imageUrl+"}}{{:~_checkImgUrls()}}{{/if}}{{/if}}"+f[0].outerHTML+"{{if !"+this.model.fieldSettings.primaryKey+"}}{{if "+this.model.fieldSettings.enableAjax+" == undefined || "+this.model.fieldSettings.enableAjax+".toString() == 'false'}}{{if !"+this.model.fieldSettings.navigateUrl+"}}{{if "+this.model.fieldSettings.enableCheckMark+" !== undefined}}{{if "+this.model.fieldSettings.enableCheckMark+".toString() == 'false' ? "+this.model.fieldSettings.enableCheckMark+" : "+this.model.enableCheckMark+"}}"+i[0].outerHTML+"{{/if}}{{else}}{{if "+this.model.enableCheckMark+"}}"+i[0].outerHTML+"{{/if}}{{/if}}{{/if}}{{/if}}{{/if}}";n[0].innerHTML="{{if "+this.model.fieldSettings.renderTemplate+" == undefined || "+this.model.fieldSettings.renderTemplate+".toString() == 'false'}}"+u[0].outerHTML+"{{else}}{{:templateId}}{{/if}}"}return this.model.renderMode=="ios7"&&(r=t.buildTag("div."+this._prefixClass+"list-div"),r[0].innerHTML=n[0].innerHTML,n.empty().append(r)),n},_renderScrollPanel:function(n,i,r,u){this._scrollWrapper=t.buildTag("div","",{},{"data-role":"ejmscrollpanel","data-ej-rendermode":this.model.renderMode,"data-ej-target":r,id:i,"data-ej-theme":this.model.theme,"data-ej-targetwidth":u?null:this.model.width,"data-ej-targetheight":this.model.height,"data-ej-setautoheight":this.model.autoAdjustScrollHeight,"data-ej-adjustfixedposition":this.model.adjustFixedPosition,"data-ej-enablenativescrolling":this.model.enableNativeScrolling,"data-ej-windows-renderdefault":this.model.windows.renderDefault,"data-ej-showscrollbars":this.model.showScrollbars,"data-ej-checkdomchanges":this.model.checkDOMChanges});n.append(this._scrollWrapper)},_updateContent:function(r,u){var l=this,f=n(r),e=f.attr("data-childid"),o,h,s,c;id=this._isInsideNavigation&&r.attr("data-href")?t.getCurrentPage().find(n("#"+e)):this.element.find(n("#"+e));id.length&&(o=this.element.find("#"+e+"_header"),h=this.element.find("#"+e+"_scroll"),this.model.enableFiltering&&this._initializeFiltering(n(id)),s=f.attr("data-childtitle")==i?r.text():f.attr("data-childtitle"),o.hasClass("e-m-header")&&(c=o.ejmHeader("instance"),c.setModel({title:s,leftButtonCaption:t.isWindows()?"":u})),id.attr("data-hdr-title",s).attr("data-hdr-bckbtn",u),this._isInsideNavigation&&r.attr("data-href")&&this._nearestND.model.contentId?(n(t.getCurrentPage().find("#"+this._nearestND.model.contentId)).find(".e-m-lv.subpage:visible").hide(),n(t.getCurrentPage().find("#"+this._nearestND.model.contentId)).append(id.show()),t.widget.init(id)):(App.transferPage(f.closest(".subpage"),id,{isFromAjax:this._isFromAjax,transition:this.model.transition,parentSubPage:f.closest(".subpage").hasClass("e-m-childitem")?!1:!0}),this._transitionDelegate=n.proxy(this._transitionHandler,{proxy:this,idEle:id,scrollEle:h,delegate:this._transitionDelegate}),id.bind(t.transitionEndEvent(),this._transitionDelegate)))},_transitionHandler:function(){this.proxy._setHeightWidth();this.proxy.model.allowScrolling&&this.scrollEle.ejmScrollPanel("refresh");this.idEle.unbind(t.transitionEndEvent(),this.delegate)},_renderHeader:function(n,i,r,u){return t.buildTag("div","",{},{"data-role":"ejmheader","data-ej-showLeftButton":i,"data-ej-leftbuttoncaption":u?u:"Back","data-ej-title":r,"data-ej-leftbuttontap":this.model.headerBackButtonTap,"data-ej-righttbuttontap":this.model.headerBackButtonTap,"data-ej-rendermode":this.model.renderMode,"data-ej-theme":this.model.theme,"data-ej-position":"normal",id:n+"_header","data-ej-hideforunsupporteddevice":this.model.hideHeaderForUnsupportedDevice,"data-ej-windows-renderdefault":this.model.windows.renderDefault,"data-ej-windows-enablecustomtext":this.model.windows.enableHeaderCustomText})},_returnData:function(){var t=this._currentItem.closest("ul.e-m-list-hdr").find("input.e-m-lv-check:checked").closest("li");return{hasChild:this.element.find("#"+this._currentItem.attr("data-childid")).length?!0:!1,item:this._currentItem,text:this._currentItem.find(".e-m-list-text").text(),index:this._currentItem.index(),isChecked:this._currentItem.find("input.e-m-lv-check").length?this._currentItem.find("input.e-m-lv-check").prop("checked"):!1,checkedItems:t.length?t:null,checkedItemsText:t.length?n(t).map(function(){return n(this).text()}).get():null}},_triggerStartEvent:function(n){this.model.touchStart=t.getAttrVal(this._currentItem,"data-touchstart",this._touchStart);this.model.touchStart&&this._trigger("touchStart",n)},_triggerEndEvent:function(n){this.model.touchEnd=t.getAttrVal(this._currentItem,"data-touchend",this._touchEnd);this.selectedItemIndex(this._currentItem.index());this.model.touchEnd&&this._trigger("touchEnd",n)},_createFilterDiv:function(){return t.buildTag("div.e-m-lv-filter",t.buildTag("input.e-m-lv-input","",{},{"data-role":"ejmtextbox","data-ej-rendermode":this.model.renderMode,"data-ej-theme":this.model.theme,"data-ej-windows-renderdefault":this.model.windows.renderDefault}))},_emptyFilterTextValue:function(n){n.find(".e-m-lv-input").ejmTextBox("model.value","")},_createListDiv:function(n){this._div=t.buildTag("div#"+n+"."+this._rootCSS+" e-m-"+this.model.renderMode+" e-m-"+this.model.theme+" subpage e-m-childitem e-m-ajaxchild",this.model.showHeader&&this._isInsideNavigation&&!this._nearestND.model.contentId?this._renderHeader(n,!0,this._currentItem.text()):"")},_createCheckBox:function(){return t.buildTag("input.e-m-lv-check","",{},{type:"checkbox","data-role":"ejmcheckbox","data-ej-preventdefault":!0,"data-ej-theme":this.model.theme,"data-ej-rendermode":this.model.renderMode,"data-ej-checked":"{{:~_checkIsChecked()}}","data-ej-windows-renderdefault":this.model.windows.renderDefault})},_toggleCheckboxValue:function(n){n.ejmCheckBox("model.checked",!n.prop("checked"))},_setCheckboxValue:function(n,t){n.ejmCheckBox({checked:t})},_convertToRelativeUrl:function(n){return App.route.convertToRelativeUrl(n)}});n.extend(!0,t.mobile.ListView.prototype,t.ListViewBase.prototype)}(jQuery,Syncfusion)})